<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html xmlns:o=""><head><title></title><meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link><meta name="GENERATOR" content="MSHTML 11.00.10570.1001"></meta></head><body>
<h3 style="TEXT-ALIGN: justify; MARGIN: 8pt 0cm 6pt 14.2pt"><a name="_Toc252791191"><font size="5">Справочник "Типы событий"</font></a><font size="2" face="Times New Roman"></font></h3>
<p></p>
<p>Ключевые операции могут быть автоматически созданы с помощью механизма событий. Практически создание любого документа является следствием события, предшествующего данному процессу. Так, например, созданию Задания на перевозку груза предшествует изменение статуса Заявки на перевозку груза, а созданию Рейса предшествует изменение статуса Задания на перевозку груза.</p>
<p></p>
<table style="WIDTH: 100%; TEXT-ALIGN: left; BACKGROUND-COLOR: rgb(235,223,255)" cellspacing="2" cellpadding="2" border="1"><tbody><tr><td><strong>Пример</strong> 
<p>Рассмотрим пример взаимосвязи действий и событий, инициирующих действия на примере изменения статуса <strong><a href="Document.упЗаданиеНаПеревозкуГруза/Help">Задания на перевозку груза</a></strong> и создание <strong><a href="Document.упРейс/Help">Рейса</a></strong>. Для создания <strong><a href="Document.упРейс/Help">Рейса</a></strong> исходным действием является изменение статуса <strong><a href="Document.упЗаданиеНаПеревозкуГруза/Help">Задания на перевозку груза</a></strong>, например, <strong>К</strong> <strong>планированию</strong>, содержащее данные о запланированном к перевозке грузу. Создание <strong><a href="Document.упРейс/Help">Рейса</a></strong> в данном случае является событием, сформированным на основании изменения статуса <strong>Задания</strong> <strong>на</strong> <strong>перевозку</strong>.</p></td></tr></tbody></table><p></p>
<p>Создание событий и настройка инициирующих их действий выполняется в справочнике <strong>Типы событий</strong>. В форме списка все события могут располагаться по иерархии. В справочнике поддерживается иерархия элементов в связи с этим любой из элементов справочника может быть родительским элементом для другого элемента этого справочника. </p>
<p></p>Для создания нового события необходимо заполнить следующие данные: 
<p></p>
<ul><p></p>
<li><strong>Родительское</strong> <strong>событие </strong>– определяет предшествующее событие и положение данного события в иерархии справочника<strong> Типы событий</strong>. 
<p></p>
<p></p>
</li>
<li><strong>Наименование</strong> типа события может быть произвольным и понятным пользователю. 
<table style="WIDTH: 100%; TEXT-ALIGN: left; BACKGROUND-COLOR: rgb(235,223,255)" cellspacing="2" cellpadding="2" border="1"><tbody><tr><td>
<p>Например, «Создать рейс» или «Отправить Заявку на ТС».</p></td></tr></tbody></table><p></p>
</li>
<li><strong>Тип</strong> <strong>исходного</strong> <strong>действия</strong> – действие-инициатор, на основании которого необходимо создавать событие на обработку задания. 
<p></p>
<p></p>
</li>
<li>Обработка события производится с помощью регламентных заданий, запуск которых настраивается по расписанию в заданный период времени или сразу по факту наступления исходного действия. Для запуска регламентного задания по созданию события сразу по факту наступления исходного действия необходимо в группе <strong>Время обработки события </strong>выбрать пункт <strong>Сразу</strong>. При необходимости запуск регламентного задания может произойти с задержкой на заданное количество минут. Обработка события также может запускаться в заданное в поле <strong>Создать</strong> <strong>в</strong> <strong>время</strong>. Для перезапуска события в случае неудачной попытки его создания, необходимо задать количество этих попыток в параметре <strong>Повторять</strong> <strong>при</strong> <strong>неудаче</strong>. 
<p></p>
<p></p>
</li>
<li><strong>Алгоритм проверки</strong> <strong>на соответствие событию</strong> – раздел который позволяет дополнительно настроить параметры отбора документов, которые создают исходное событие. Перечень полей для отбора в списке Доступные поля формируется в зависимости от выбранного <strong>Типа исходного действия</strong>. Список полей отбора и их значения указываются в правой части раздела. 
<table style="WIDTH: 100%; TEXT-ALIGN: left; BACKGROUND-COLOR: rgb(235,223,255)" cellspacing="2" cellpadding="2" border="1"><tbody><tr><td>
<p>Например, для типа исходного действия «Изменение статуса задания на перевозку» можно настроить автоматическое создание рейса, если вид перевозки в задании установлен в значении «FTL», а статус задания устанавливается в значении «К планированию». В других случаях действие системы по этому типу событий не будет выполнятся.</p></td></tr></tbody></table><p></p>
</li>
<li><strong>Алгоритмы</strong> <strong>обработки</strong> – реквизит при помощи которого указывается конкретное действие системы на возникшее событие. Перечень алгоритмов, доступных для обработки исходного действия, зависит от значения выбранного в реквизите <strong>Тип исходного действия</strong>. 
<p></p>
<p>В системе предусмотрены следующие алгоритмы: </p>
<ul><p></p>
<li><strong>Передать</strong> <strong>заявку</strong> <strong>к</strong> <strong>выполнению</strong> - в результате устанавливается статус «К выполнению» документа «Заявка на перевозку»; 
<p></p>
<p></p>
</li>
<li><strong>Согласовать</strong> <strong>заявку</strong> – в результате устанавливается статус «Согласовано» документа «Заявка на перевозку»; 
<p></p>
<p></p>
</li>
<li><strong>Отменить</strong> <strong>заявку</strong> - в результате устанавливается статус «Отменена» документа «Заявка на перевозку»; 
<p></p>
<p></p>
</li>
<li><strong>Отменить</strong> <strong>задание</strong> - в результате устанавливается статус «Отменено» документа «Задание на перевозку»; 
<p></p>
<p></p>
</li>
<li><strong>Оповестить пользователя</strong> – в результате создается письмо пользователю с параметрами, указанными в реквизитах<strong> Вида получателя</strong>, <strong>Получателя</strong>, <strong>Вида</strong> <strong>шаблона</strong> (произвольный или по шаблону) и <strong>Шаблона</strong> <strong>письма</strong>; 
<p></p>
<p></p>
</li>
<li><strong>Напоминание пользователю</strong> - в результате создается напоминание пользователю с параметрами, указанными в реквизитах <strong>Пользователя</strong> или <strong>Группы</strong> <strong>пользователей</strong>, <strong>Срока</strong> <strong>напоминания</strong> в минутах; 
<p></p>
<p></p>
</li>
<li><strong>Создать задание на перевозку груза</strong> - в результате создается новый документ «Задание на перевозку» со статусом «Новый»; 
<p></p>
<p></p>
</li>
<li><strong>Создать заявку на возврат груза</strong> – в результате создается Заявка на возврат отмененного груза на последнем плече цепи поставок. 
<p></p>
<p></p>
</li>
<li><strong>Создать заявку на возврат тары</strong> – в результате создается Заявка на возврат тары от адреса сдачи груза в последнем плече цепи поставок, если в Виде перевозки установлен реквизит «Возврат от адреса получения». Если реквизит не установлен, то заявка на возврат тары сформируется от адреса отправления в последнем плече цепи поставок. 
<p></p>
<p></p>
</li>
<li><strong>Передать задание к планированию</strong> - в результате устанавливается статус «К выполнению» документа «Задание на перевозку»; 
<p></p>
<p></p>
</li>
<li><strong>Задача пользователю</strong>, с указанием <strong>Исполнителя</strong>, <strong>Важности задачи</strong>, <strong>Наименования</strong> <strong>задачи</strong>; 
<p></p>
<p></p>
</li>
<li><strong>Создать рейс</strong> - в результате создается новый документ «Задание на перевозку» со статусом «Новый»; 
<p></p>
<p></p>
</li>
<li><strong>Включить задание в периодический рейс</strong> – результате задания включаются в рейсы, не переданные к выполнению, либо в новые рейсы, которые создаются по расписанию (см. справочник <strong>Расписание периодических рейсов</strong>). 
<p></p>
<p></p>
</li>
<li><strong>Отменить рейс</strong> - в результате устанавливается статус «Отменен» документа «Рейс»; 
<p></p>
<p></p>
</li>
<li><strong>Передать рейс к выполнению</strong> - в результате устанавливается статус «К выполнению» документа «Рейс»; 
<p></p>
<p></p>
</li>
<li><strong>Передать следующий в мультимодальной перевозке рейс к выполнению</strong> – в результате изменения статуса задания на перевозку входящего в цепь поставок на Выполнено, происходит изменение статуса рейса следующего в цепи поставки для последующей доставки груза.; 
<p></p>
<p></p>
</li>
<li><strong>Расчет плановых доходов</strong> – в результате в документе Заявка на перевозку груза происходит расчет плановых доходов. 
<p></p>
<p></p>
</li>
<li><strong>Расчет плановых расходов</strong> – в результате в документе рейс происходит расчет плановых расходов. 
<p></p>
<p></p>
</li>
<li><strong>Сформировать заявки на ТС</strong> - в результате создается новый документ «Заявка на ТС» со статусом «Новый»;  
<p></p>
<p></p>
</li>
<li><strong>Создать подтверждение заявки на ТС</strong> – в результате происходит формирование Подтверждения заявки на ТС. 
<p></p>
<p></p>
</li>
<li><strong>Скорректировать начальные остатки в следующем путевом листе</strong> – в результате происходит корректировка начальных остатков пробега и остатков топлива в путевом листе в статусе Новый, который был выдан на ТС, когда предыдущий ещё не был обработан. 
<p></p>
<p></p>
</li>
<li><strong>Отразить заправку (слив) в путевом листе по данным датчиков</strong> – в результате записи события мониторинга по увеличению (снижению) уровня топлива в баке производится запись в путевом листе. 
<p></p>
<p></p>
</li>
<li><strong>Создать событие мониторинга «Опоздание в точке маршрута»</strong> - в результате происходит формирование события мониторинга Опоздание в точке маршрута. 
<p></p>
<p></p>
</li>
<li><strong>Создать событие мониторинга «Планируемое опоздание в точке маршрута»</strong> - в результате формируется событие мониторинга Планируемое опоздание в точке маршрута.</li></ul><ul><li><strong>Произвольный алгоритм</strong>. В этом случае в появившемся текстовом поле на языке 1С:Предприятие 8.3. может быть написан произвольный алгоритм. 
<p></p></li></ul></li></ul><p></p>Все произошедшие события фиксируются в одноименном регистре сведений, который может быть открыт при помощи команды <strong>Произошедшие события</strong> панели навигации раздела <strong>Сервис и настройки</strong> из группы <strong>События перевозки</strong>. 
<p></p>
<p></p></body></html>