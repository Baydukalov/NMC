<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html xmlns:o="urn:schemas-microsoft-com:office:office"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link><meta name="GENERATOR" content="MSHTML 11.00.10570.1001"></meta></head><body>
<h3 style="TEXT-ALIGN: justify; MARGIN: 8pt 0cm 6pt 14.2pt"><a name="_Toc252791191"><font size="5">Справочник "Правила расчета тарифов"</font></a><font size="2" face="Times New Roman"></font></h3>
<p></p>
<p>Для расчета доходов и расходов предприятия от оказания услуг перевозки грузов для каждой статьи доходов и расходов могут быть указаны правила расчета финансовых показателей. Правила расчета финансовых показателей хранятся в справочнике <strong>Правила расчета тарифов</strong>. Правила используются в документе <strong>Установка правил расчета доходов и расходов</strong>. Документ <strong>Установка правил расчета доходов и расходов</strong> позволяет зафиксировать в системе порядок расчета доходов и расходов по конкретной статье доходов и расходов.</p>
<p></p>
<p><strong>Способ расчета</strong> может быть </p>
<ul><li>Форумула. Формула расчета описывается с использованием синтаксиса встроенного языка 1С:Предприятие, при этом могут использоваться условия, функции, показатели и шкалы. 
</li>
<li>Произвольный. Предназначен для программистов 1С. Алгоритм расчета задается во внешней обработки в предопределенной процедуре Рассчитать(Показатели, ПроизвольныеДанные), в параметры которой передается 
<ul><li>Показатели - структура значений показателей 
</li>
<li>ПроизвольныеДанные - произвольные постоянные данные правила, хранимые в элементе справочника</li></ul></li></ul><p> </p>
<p>Показатели, доступные для использования в правиле, указываются в табличной части на закладке <strong>Показатели</strong>. Показатели могут быть созданы пользователем самостоятельно. </p>На закладке <strong>Функции </strong>приведены все функции, которые могут использоваться в правиле. Перечень функций ограничен средствами языка 1С:Предприятие. 
<p></p>На закладке <strong>Шкалы</strong> приведены варианты шкал, которые могут использоваться в правиле. Варианты шкал создаются пользователями самостоятельно. 
<p></p>
<p>Для каждого правила расчета тарифа определяется область действия, которая регулируется при помощи флага <strong>Расчет проводится по каждой строке</strong>. Если флаг установлен, то правило будет применяться для показателей рассчитанных для каждого грузового места, указанного в заявке на перевозку, задании на перевозку или при отражении фактических расходов или доходов. Итоговая сумма доходов или расходов будет получена суммированием значений, рассчитанных по каждой строке. В противном случае правило будет применятся к общему показателю, рассчитанному по документу. </p>
<p>Кнопка "Данные расчета" для способа расчета "Произвольный" с внешней обработкой открывает ее основную форму и передает ей параметр АдресПроизвольныхДанных, содержащий адрес произвольных хранимых в правиле данных. При закрытии формы внешней обработки в параметре закрытия должен возвращаться адрес во временном хранилище новых хранимых данных. Если же основная форма внешней обработки не задана или способ расчета не равен "Произвольный", то при нажатии на кнопку "Данные расчета" открывается редактор тарифной сетки, позволяющей задать матрицу числовых значений на пересечении значений двух показателей. Кнопка "Тарифная сетка" показывается только для способа расчета "Формула" и также открывает редактор тарифной сетки.</p>
<p>Для способа расчета "Произвольный" предумотрена возможность загрузки и выгрузки внешней обработки, а также ее отладки.</p></body></html>