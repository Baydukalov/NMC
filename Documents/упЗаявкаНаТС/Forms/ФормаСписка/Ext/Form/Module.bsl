
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если ПользователиКлиентСервер.ЭтоСеансВнешнегоПользователя() Тогда
		Пользователь = Справочники.Пользователи.ПустаяСсылка();
		Элементы.Статус.Видимость               = Ложь;
		Элементы.СтатусДляПеревозчика.Видимость = Истина;
		Если УправлениеДоступом.ЕстьРоль("упПеревозчик") Тогда
			мсвСтатусы = Новый Массив;
			мсвСтатусы.Добавить(Перечисления.упСтатусыЗаявкиНаТС.Отправлена);
			мсвСтатусы.Добавить(Перечисления.упСтатусыЗаявкиНаТС.ПолученоПредложение);
			мсвСтатусы.Добавить(Перечисления.упСтатусыЗаявкиНаТС.Подтверждена);
			мсвСтатусы.Добавить(Перечисления.упСтатусыЗаявкиНаТС.Отклонена);
			ОбщегоНазначенияКлиентСервер.УстановитьЭлементОтбора(Список.Отбор, "Статус", мсвСтатусы, ВидСравненияКомпоновкиДанных.ВСписке);
		КонецЕсли;
		
	Иначе	
		Пользователь = Пользователи.ТекущийПользователь();
		Элементы.Статус.Видимость               = Истина;
		Элементы.СтатусДляПеревозчика.Видимость = Ложь;
		
	КонецЕсли;
	
	Список.Параметры.УстановитьЗначениеПараметра("Пользователь", Пользователь);
	// СтандартныеПодсистемы.Печать
	УправлениеПечатью.ПриСозданииНаСервере(ЭтотОбъект);
	// Конец СтандартныеПодсистемы.Печать
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

////////////////////////////////////////////////////////////////////////////////
// СЛУЖЕБНЫЕ ПРОЦЕДУРЫ И ФУНКЦИИ БСП

// СтандартныеПодсистемы.ПодключаемыеКоманды

&НаКлиенте
Процедура Подключаемый_ВыполнитьКоманду(Команда)

	ПодключаемыеКомандыКлиент.ВыполнитьКоманду(ЭтотОбъект, Команда, Элементы.Список);

КонецПроцедуры

&НаСервере
Процедура Подключаемый_ВыполнитьКомандуНаСервере(Контекст, Результат)

	ПодключаемыеКоманды.ВыполнитьКоманду(ЭтотОбъект, Контекст, Элементы.Список, Результат);

КонецПроцедуры

&НаКлиенте
Процедура Подключаемый_ОбновитьКоманды()

	ПодключаемыеКомандыКлиентСервер.ОбновитьКоманды(ЭтотОбъект, Элементы.Список);

КонецПроцедуры

// Конец СтандартныеПодсистемы.ПодключаемыеКоманды

// СтандартныеПодсистемы.Печать
&НаКлиенте
Процедура Подключаемый_ВыполнитьКомандуПечати(Команда)
	
	УправлениеПечатьюКлиент.ВыполнитьПодключаемуюКомандуПечати(Команда, ЭтотОбъект, Элементы.Список);
	
КонецПроцедуры
// Конец СтандартныеПодсистемы.Печать

#КонецОбласти